(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(30),s=a.n(r),o=(a(38),a(12)),i=a(3),l=Object(n.createContext)(),u=Object(n.createContext)(),d=a(0),j=function(e){e.title,e.icon;var t=Object(n.useContext)(l),a=t.isAuthenticated,c=t.logout,r=t.user,s=Object(n.useContext)(u).clearContacts;return Object(d.jsxs)("div",{className:"navbar",children:[Object(d.jsx)("div",{className:"nav-title",children:Object(d.jsx)("h1",{children:Object(d.jsx)(o.b,{className:"navlink",to:"/",children:"Contacts App"})})}),Object(d.jsx)("div",{className:"navlinks",children:a?Object(d.jsxs)(n.Fragment,{children:[Object(d.jsxs)(n.Fragment,{children:["Welcome ",Object(d.jsx)("strong",{children:r&&r.name})]}),Object(d.jsx)(o.b,{className:"navlink",to:"#!",onClick:function(){c(),s()},children:"Logout"})]}):Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(o.b,{className:"navlink",to:"/register",children:"Register"}),Object(d.jsx)(o.b,{className:"navlink",to:"/login",children:"Login"})]})})]})},p=a(11),b=a(2),h=a(8),O=function(){var e=Object(n.useContext)(u),t=e.createContact,a=e.clearCurrentContact,c=e.updateContact,r=e.current;Object(n.useEffect)((function(){l(r||{name:"",email:"",phone:"",type:"personal"})}),[e,r]);var s=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),o=Object(h.a)(s,2),i=o[0],l=o[1],j=i.name,O=i.email,m=i.phone,f=i.type,x=function(e){return l(Object(b.a)(Object(b.a)({},i),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)("a",{className:"create-contact-link",href:"#contact-form",children:Object(d.jsx)("button",{className:"create-contact-button",id:"create-contact-button",children:"+"})}),Object(d.jsxs)("form",{className:"contact-form",id:"contact-form",onSubmit:function(e){e.preventDefault(),r?c(i):t(i),a()},children:[Object(d.jsx)("h2",{children:r?"Update contact":"Create contact"}),Object(d.jsx)("input",{className:"input-field",type:"text",name:"name",value:j,onChange:x,placeholder:"Name",required:!0}),Object(d.jsx)("input",{className:"input-field",type:"email",name:"email",value:O,onChange:x,placeholder:"Email"}),Object(d.jsx)("input",{className:"input-field",minLength:"8",maxLength:"8",type:"phone",name:"phone",value:m,onChange:x,placeholder:"Phone"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Contact type"}),Object(d.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===f,onChange:x}),"\xa0 Personal \xa0",Object(d.jsx)("input",{type:"radio",name:"type",value:"work",checked:"work"===f,onChange:x}),"\xa0 Work"]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{className:"button button-submit",type:"submit",value:r?"Update contact":"Create contact"}),Object(d.jsx)("a",{href:"#create-contact-button",className:"close-modal",onClick:a,children:"x"})]})]})]})},m=function(){var e=Object(n.useContext)(u),t=e.searchContact,a=e.clearContactSearch,c=e.filtered,r=Object(n.useRef)("");Object(n.useEffect)((function(){c||(r.current.value="")}));return Object(d.jsx)("form",{children:Object(d.jsx)("input",{className:"input-field searchbar",ref:r,type:"text",onChange:function(e){r.current.value?t(e.target.value):a()},placeholder:"Search contacts..."})})},f=function(e){var t=e.contact,a=Object(n.useContext)(u),c=a.deleteContact,r=a.setCurrentContact,s=a.clearCurrentContact,o=a.clearContactSearch,i=t._id,l=t.name,j=t.email,p=t.phone,b=t.type;return Object(d.jsxs)("div",{className:"contact-card",children:[Object(d.jsxs)("h3",{children:[l,Object(d.jsx)("span",{className:"badge "+("work"===b?"badge-work":"badge-personal"),children:b})]}),Object(d.jsxs)("ul",{className:"contact-details",children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{className:"fas fa-envelope-open"}),"\xa0\xa0",j?Object(d.jsx)(n.Fragment,{children:j}):Object(d.jsx)(n.Fragment,{children:"No email"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{className:"fas fa-phone"}),"\xa0\xa0",p?Object(d.jsx)(n.Fragment,{children:p}):Object(d.jsx)(n.Fragment,{children:"No phone number"})]})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("a",{href:"#contact-form",children:Object(d.jsx)("button",{className:"button button-edit",onClick:function(){return r(t)},children:"Edit"})}),Object(d.jsx)("button",{className:"button button-delete",onClick:function(){c(i),s(),o()},children:"Delete"})]})]})},x=function(){var e=Object(n.useContext)(u),t=e.contacts,a=e.filtered,c=e.readContacts,r=e.loading;return Object(n.useEffect)((function(){c()}),[]),null===t||t.length||r?Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)("h2",{children:"My contacts"}),Object(d.jsx)(m,{}),Object(d.jsx)("div",{className:"contacts-list",children:a?a.map((function(e){return Object(d.jsx)(f,{contact:e},e._id)})):t.map((function(e){return Object(d.jsx)(f,{contact:e},e._id)}))})]}):Object(d.jsx)("p",{className:"no-contacts",children:"You have no contacts"})},g=function(){var e=Object(n.useContext)(l),t=e.isAuthenticated;return Object(n.useEffect)((function(){e.loadUser()}),[]),Object(d.jsx)(n.Fragment,{children:t?Object(d.jsxs)("div",{className:"home-layout",children:[Object(d.jsx)("div",{className:"add-contact-div",children:Object(d.jsx)(O,{})}),Object(d.jsx)("div",{className:"my-contacts-div",children:Object(d.jsx)(x,{})})]}):Object(d.jsx)(n.Fragment,{children:"Loading..."})})},v=function(){return Object(d.jsx)("div",{children:"About page"})},y=a(4),C=a.n(y),N=a(10),k=a(9),E=a.n(k),w=a(16),T="CREATE_CONTACT",R="READ_CONTACTS",A="UPDATE_CONTACT",S="DELETE_CONTACT",_="FILTER_CONTACTS",L="CLEAR_CONTACTS",F="SET_CURRENT",I="CLEAR_CURRENT",U="CLEAR_FILTER",D="CONTACT_ERROR",q="SET_ALERT",P="REMOVE_ALERT",G="REGISTER_SUCCESS",M="REGISTER_FAIL",J="USER_LOADED",W="AUTH_ERROR",B="LOGIN_SUCCESS",H="LOGIN_FAIL",V="LOGOUT",Y="CLEAR_ERRORS",z=function(e,t){switch(t.type){case T:return Object(b.a)(Object(b.a)({},e),{},{contacts:[t.payload].concat(Object(w.a)(e.contacts)),loading:!1});case R:return Object(b.a)(Object(b.a)({},e),{},{contacts:t.payload,loading:!1});case F:return Object(b.a)(Object(b.a)({},e),{},{current:t.payload});case I:return Object(b.a)(Object(b.a)({},e),{},{current:null});case A:return Object(b.a)(Object(b.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case S:return Object(b.a)(Object(b.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case L:return Object(b.a)(Object(b.a)({},e),{},{contacts:[],filtered:null,error:null,current:null});case _:return Object(b.a)(Object(b.a)({},e),{},{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.phone.match(a)}))});case U:return Object(b.a)(Object(b.a)({},e),{},{filtered:null});case D:return Object(b.a)(Object(b.a)({},e),{},{error:t.payload});default:return e}},K=function(e){var t=Object(n.useReducer)(z,{contacts:[],current:null,filtered:null,error:null,loading:!0}),a=Object(h.a)(t,2),c=a[0],r=a[1],s=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,E.a.post("/api/contacts",t,a);case 4:n=e.sent,r({type:T,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:D,payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(N.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/contacts");case 3:t=e.sent,r({type:R,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:D,payload:e.t0.response.data.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,E.a.put("/api/contacts/".concat(t._id),t,a);case 4:n=e.sent,r({type:A,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:D,payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.delete("/api/contacts/".concat(t));case 3:r({type:S,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:D,payload:e.t0.response.data.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(u.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,loading:c.loading,createContact:s,readContacts:o,setCurrentContact:function(e){return r({type:F,payload:e})},clearCurrentContact:function(){return r({type:I})},updateContact:i,deleteContact:l,clearContacts:function(){return r({type:L})},searchContact:function(e){return r({type:_,payload:e})},clearContactSearch:function(){return r({type:U})}},children:e.children})},Q=function(e,t){switch(t.type){case J:return Object(b.a)(Object(b.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case G:case B:return localStorage.setItem("token",t.payload.token),Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case M:case W:case H:case V:return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case Y:return Object(b.a)(Object(b.a)({},e),{},{error:null});default:return e}},X=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},Z=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,user:null,error:null,loading:!0},a=Object(n.useReducer)(Q,t),c=Object(h.a)(a,2),r=c[0],s=c[1],o=function(){var e=Object(N.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(localStorage.token),e.prev=1,e.next=4,E.a.get("/api/auth");case 4:t=e.sent,s({type:J,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:W});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,E.a.post("/api/users",t,a);case 4:n=e.sent,s({type:G,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:M,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,E.a.post("/api/auth",t,a);case 4:n=e.sent,s({type:B,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:H,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(l.Provider,{value:{token:r.token,isAuthenticated:r.isAuthenticated,loading:r.loading,user:r.user,error:r.error,loadUser:o,register:i,login:u,logout:function(){return s({type:V})},clearErrors:function(){return s({type:Y})}},children:e.children})},$=Object(n.createContext)(),ee=function(){var e=Object(n.useContext)($);return e.alerts.length>0&&e.alerts.map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("i",{className:"fas fa-info-circle"}),"\xa0",e.message]})}))},te=function(e){var t=Object(n.useContext)(l),a=t.register,c=t.error,r=t.clearErrors,s=t.isAuthenticated,o=Object(n.useContext)($).setAlert;Object(n.useEffect)((function(){s&&e.history.push("/"),"This user already exists"===c&&(o(c,"danger"),r())}),[c,s,e.history]);var i=Object(n.useState)({name:"",email:"",password:"",passwordConfirmation:""}),u=Object(h.a)(i,2),j=u[0],O=u[1],m=j.name,f=j.email,x=j.password,g=j.passwordConfirmation,v=function(e){return O(Object(b.a)(Object(b.a)({},j),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsxs)("form",{className:"registration-form",onSubmit:function(e){e.preventDefault(),x!==g?o("Passwords don't match","danger"):a({name:m,email:f,password:x})},children:[Object(d.jsx)("h2",{children:"Register with us"}),Object(d.jsx)("input",{className:"input-field registration-field",type:"text",name:"name",value:m,onChange:v,placeholder:"Name",required:!0}),Object(d.jsx)("input",{className:"input-field registration-field",type:"email",name:"email",value:f,onChange:v,placeholder:"Email",required:!0}),Object(d.jsx)("input",{className:"input-field registration-field",type:"password",name:"password",value:x,onChange:v,placeholder:"Enter a password",minLength:"8",required:!0}),Object(d.jsx)("input",{className:"input-field registration-field",type:"password",name:"passwordConfirmation",value:g,onChange:v,placeholder:"Confirm your password",minLength:"8",required:!0}),Object(d.jsx)("input",{className:"button button-submit registration-field",type:"submit",value:"Register"}),Object(d.jsx)(ee,{})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{className:"signature",children:["This website was developed by ",Object(d.jsx)("a",{href:"https://saad-shaikh-portfolio.netlify.app/",target:"_blank",children:"Saad Shaikh"})]})]})},ae=function(e){var t=Object(n.useContext)(l),a=t.login,c=t.error,r=t.clearErrors,s=t.isAuthenticated,o=Object(n.useContext)($).setAlert;Object(n.useEffect)((function(){s&&e.history.push("/"),"This email address is not registered"===c&&(o(c,"danger"),r())}),[c,s,e.history]);var i=Object(n.useState)({email:"",password:""}),u=Object(h.a)(i,2),j=u[0],O=u[1],m=j.email,f=j.password,x=function(e){return O(Object(b.a)(Object(b.a)({},j),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsxs)("form",{className:"registration-form",onSubmit:function(e){e.preventDefault(),a({email:m,password:f})},children:[Object(d.jsx)("h2",{children:"Login"}),Object(d.jsx)(ee,{}),Object(d.jsx)("input",{className:"input-field registration-field",type:"email",name:"email",value:m,onChange:x,placeholder:"Email",required:!0}),Object(d.jsx)("input",{className:"input-field registration-field",type:"password",name:"password",value:f,onChange:x,placeholder:"Enter a password",required:!0}),Object(d.jsx)("input",{className:"button button-submit registration-field",type:"submit",value:"Login"})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{className:"signature",children:["This website was developed by ",Object(d.jsx)("a",{href:"https://saad-shaikh-portfolio.netlify.app/",target:"_blank",children:"Saad Shaikh"})]})]})},ne=a(33),ce=["component"],re=function(e){var t=e.component,a=Object(ne.a)(e,ce),c=Object(n.useContext)(l),r=c.isAuthenticated,s=c.loading;return Object(d.jsx)(i.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return r||s?Object(d.jsx)(t,Object(b.a)({},e)):Object(d.jsx)(i.a,{to:"/login"})}}))},se=a(70),oe=function(e,t){switch(t.type){case q:return[].concat(Object(w.a)(e),[t.payload]);case P:return e.filter((function(e){return e.id!==t.payload}));default:return e}},ie=function(e){var t=Object(n.useReducer)(oe,[]),a=Object(h.a)(t,2),c=a[0],r=a[1];return Object(d.jsx)($.Provider,{value:{alerts:c,setAlert:function(e,t){var a=se.a.v4;r({type:q,payload:{message:e,type:t,id:a}}),setTimeout((function(){r({type:P,payload:a})}),5e3)}},children:e.children})};X(localStorage.token);var le=function(){return Object(d.jsx)(Z,{children:Object(d.jsx)(K,{children:Object(d.jsx)(ie,{children:Object(d.jsx)(o.a,{children:Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(j,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(re,{exact:!0,path:"/",component:g}),Object(d.jsx)(i.b,{exact:!0,path:"/about",component:v}),Object(d.jsx)(i.b,{exact:!0,path:"/register",component:te}),Object(d.jsx)(i.b,{exact:!0,path:"/login",component:ae})]})]})})})})})};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(le,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.b3e0f72b.chunk.js.map